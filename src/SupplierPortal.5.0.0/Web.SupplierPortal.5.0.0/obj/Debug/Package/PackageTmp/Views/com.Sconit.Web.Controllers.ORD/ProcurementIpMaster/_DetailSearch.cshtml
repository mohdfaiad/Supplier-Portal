@using com.Sconit.Entity.ACC
@using com.Sconit.Web.Models.SearchModels.ORD
@using com.Sconit.Entity.SYS
@using com.Sconit.Entity.ORD
<fieldset>
    @using (Html.BeginForm("DetailList", "ProcurementIpMaster"))
    {   
        <div class="search">
            <div class="search-label">
                <label for="OrderMaster_OrderNo">
                    @Resources.ORD.IpMaster.IpMaster_IpNo
                </label>
            </div>
            <div class="search-field">
                @Html.TextBox("IpNo", TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).IpNo : string.Empty)
            </div>
            
            <div class="search-label">
                <label for="OrderMaster_Flow">
                    @Resources.ORD.IpMaster.IpMaster_Flow
                </label>
            </div>
            <div class="search-field">
                @{
        Html.RenderAction("_FlowComboBox", "Common",
            new
            {
                controlName = "Flow",
                type = (int)com.Sconit.CodeMaster.OrderType.Procurement,
                selectedValue = TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).Flow : string.Empty
            });
                }
            </div>
           
            <div class="search-label">
                <label for="OrderMaster_PartyFrom">
                    @Resources.ORD.IpMaster.IpMaster_PartyFrom
                </label>
            </div>
            <div class="search-field">
                @{
               Html.RenderAction("_OrderMasterPartyFromComboBox", "Common",
                   new
                   {

                       controlName = "PartyFrom",
                       orderType = (int)com.Sconit.CodeMaster.OrderType.Procurement,
                       selectedValue = TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).PartyFrom : string.Empty
                   });
                }
            </div>
            <div class="search-label">
                <label for="OrderMaster_PartyTo">
                    @Resources.ORD.IpMaster.IpMaster_PartyTo
                </label>
            </div>
            <div class="search-field">
                @{
               Html.RenderAction("_OrderMasterPartyToComboBox", "Common",
                               new
                               {
                                   controlName = "PartyTo",
                                   orderType = (int)com.Sconit.CodeMaster.OrderType.Procurement,
                                   selectedValue = TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).PartyTo : string.Empty
                               });
                }
            </div>
             <div class="search-label">
                <label for="OrderMaster_OrderNo">
                    @Resources.ORD.IpMaster.OrderMaster_Item
                </label>
            </div>
            <div class="search-field">
                @{
               Html.RenderAction("_ItemComboBox", "Common",
                   new
                   {
                       controlName = "Item",
                       selectedValue = TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).Item : string.Empty
                   });
                    
                }
            </div>
            <div class="search-label">
                <label for="OrderMaster_DateTo">
                    @Resources.ORD.IpMaster.IpMaster_OrderNo
                </label>
            </div>
            <div class="search-field">
                @Html.TextBox("OrderNo", TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).OrderNo : string.Empty)
            </div>
            <div class="search-label">
                <label for="">
                    @Resources.ORD.IpDetail.IpDetail_ExternalOrderNo
                </label>
            </div>
            <div class="search-field">
                @Html.TextBox("ExternalOrderNo", TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).ExternalOrderNo : string.Empty)
            </div>

            <div class="search-label">
                <label for="">
                    @Resources.ORD.IpDetail.IpDetail_ExternalSequence
                </label>
            </div>
            <div class="search-field">
                @Html.TextBox("ExternalSequence", TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).ExternalSequence : string.Empty)
            </div>
           
            <div class="search-label">
                <label for="FlowMaster_FirstName">
                    @Resources.ORD.OrderDetail.OrderDetail_ManufactureParty
                </label>
            </div>
            <div class="search-field">
                @{
        Html.RenderAction("_SupplierComboBox", "Common", new
        {
            controlName = "ManufactureParty",
            selectedValue = TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).ManufactureParty : string.Empty
        });
                }
            </div>
             <div class="search-label">
                <label for="IpMaster_Status">
                    @Resources.ORD.IpMaster.IpMaster_Status
                </label>
            </div>
            <div class="search-field">
            @{
                    Html.RenderAction("_CodeMasterDropDownList", "Common", new
                    {
                        code = com.Sconit.CodeMaster.CodeMaster.IpStatus,
                        controlName = "Status",
                        includeBlankOption = true,
                        blankOptionDescription = CodeDetail.SpecialValueEnum.BlankValue,
                        blankOptionValue = "",
                        selectedValue = TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).Status : null
                    });
                }
            </div>
            <div class="search-label">
                <label for="OrderMaster_DateFrom">
                    @Resources.ORD.IpMaster.IpMaster_StartDate
                </label>
            </div>
            <div class="search-field">
                @(Html.Telerik().DatePicker()
                .Format(com.Sconit.Entity.BusinessConstants.SHORT_DATE_FORMAT)
                .Name("StartDate")
             .Value(TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).StartDate : System.DateTime.Today)
                .HtmlAttributes(new { style = "margin-bottom: 1.3em;width:200px" }))
            </div>
            <div class="search-label">
                <label for="OrderMaster_DateTo">
                    @Resources.ORD.IpMaster.IpMaster_EndDate
                </label>
            </div>
            <div class="search-field">
                @(Html.Telerik().DatePicker()
                .Format(com.Sconit.Entity.BusinessConstants.SHORT_DATE_FORMAT)
                .Name("EndDate")
             .Value(TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).EndDate : System.DateTime.Today.AddDays(1))
                .HtmlAttributes(new { style = "margin-bottom: 1.3em;width:200px" }))
            </div>
            <div class="search-label">
                <label for="OrderMaster_DateTo">
                   只显示收发差异
                </label>
            </div>
            <div class="search-field">
                @Html.CheckBox("IsShowGap", TempData["IpMasterSearchModel"] != null ? ((IpMasterSearchModel)TempData["IpMasterSearchModel"]).IsShowGap : false)
            </div>
            
        </div>
        <div class="search-footer">
            @Html.Hidden("isFromList", true)
            <button type="submit" id="btnSearch">
                @Resources.Global.Button_Search</button>
            <button type="button" id="btnDetailExport" onclick="DetailExport()">
            @Resources.Global.Button_Export</button>
        </div>
    }
   
</fieldset>
<form id="hiddenForm" action="/ProcurementIpMaster/SaveToClientDetails" target="_blank"
method="post">
</form>
 <script type="text/javascript">
     function DetailExport(e) {
         $("#hiddenForm").submit();
     }
    </script>
